<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>EphemeralObjectSynchronizer | Microsoft Live Share SDK</title><meta name="description" content="Documentation for Microsoft Live Share SDK"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">Microsoft Live Share SDK</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../modules.html">Microsoft Live Share SDK</a></li><li><a href="../modules/_microsoft_live_share.html">@microsoft/live-share</a></li><li><a href="_microsoft_live_share.EphemeralObjectSynchronizer.html">EphemeralObjectSynchronizer</a></li></ul><h1>Class EphemeralObjectSynchronizer&lt;TState&gt; </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><div class="lead">
<p>Synchronizes the underlying state of an ephemeral object with all of the other instances of
the object connected to the same container.</p>
</div><dl class="tsd-comment-tags"><dt>remarks</dt><dd><p>When a synchronizer for a ephemeral object is first created it will broadcast a <code>&quot;connect&quot;</code>
message, containing the objects initial state, to all other instances of the object that are
currently running on other clients. Those instances will respond to the sent &quot;connect&quot; message
by broadcasting an <code>&quot;update&quot;</code> message containing the current state of their object.</p>
<p>Anytime a remote &quot;connect&quot; or &quot;update&quot; event is received, the synchronizer will call the passed
in <code>updateState</code> callback with the remote objects state and the senders clientId for role
verification purposes. The logic for processing these state updates will vary but implementations
will generally want to include a timestamp in their state update so that clients can protect
against out-of-order and delayed updates. Deriving your state update from <code>IEphemeralEvent</code> and
using <code>EphemeralEvent.isNewer()</code> to compare the received update with the current update makes this
simple.</p>
<p>Once the initial &quot;connect&quot; event is sent, the synchronizer will periodically broadcast additional
&quot;update&quot; events containing the ephemeral objects current state. This redundancy helps to guard
against missed events and can be used as a ping for scenarios like presence where users can
disconnect from the container without notice.  The rate at which these ping events are sent can be
adjusted globally by setting the static <code>EphemeralObjectSynchronizer.updateInterval</code> property.</p>
<p>While each new synchronizer instance will result in a separate &quot;connect&quot; message being sent, the
periodic updates that are sent get batched together into a single &quot;update&quot; message. This lets apps
add as many ephemeral objects to a container as they&#39;d like without increasing the number of
messages being broadcast to the container.</p>
<p>Only a single synchronizer is allowed per ephemeral object. Attempting to create more than one
synchronizer for the same ephemeral object will result in an exception being raised.</p>
</dd></dl></div></section><section class="tsd-panel tsd-type-parameters"><h3>Type parameters</h3><ul class="tsd-type-parameters"><li><h4>TState<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">object</span></h4><div class="tsd-comment tsd-typography"><div class="lead">
<p>Type of state object being synchronized. This object should be a simple JSON object that uses only serializable primitives.</p>
</div></div></li></ul></section><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">EphemeralObjectSynchronizer</span></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Constructors</h3><ul class="tsd-index-list"><li class="tsd-kind-constructor tsd-parent-kind-class tsd-has-type-parameter"><a href="_microsoft_live_share.EphemeralObjectSynchronizer.html#constructor" class="tsd-kind-icon">constructor</a></li></ul></section><section class="tsd-index-section "><h3>Properties</h3><ul class="tsd-index-list"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><a href="_microsoft_live_share.EphemeralObjectSynchronizer.html#updateInterval" class="tsd-kind-icon">update<wbr/>Interval</a></li></ul></section><section class="tsd-index-section "><h3>Methods</h3><ul class="tsd-index-list"><li class="tsd-kind-method tsd-parent-kind-class"><a href="_microsoft_live_share.EphemeralObjectSynchronizer.html#dispose" class="tsd-kind-icon">dispose</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Constructors</h2><section class="tsd-panel tsd-member tsd-kind-constructor tsd-parent-kind-class tsd-has-type-parameter"><a id="constructor" class="tsd-anchor"></a><h3 class="tsd-anchor-link">constructor<a href="#constructor" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-constructor tsd-parent-kind-class tsd-has-type-parameter"><li class="tsd-signature tsd-kind-icon">new <wbr/>Ephemeral<wbr/>Object<wbr/>Synchronizer<span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TState</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span>id<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span>, containerRuntime<span class="tsd-signature-symbol">: </span><a href="../interfaces/_microsoft_live_share.IContainerRuntimeSignaler.html" class="tsd-signature-type" data-tsd-kind="Interface">IContainerRuntimeSignaler</a>, getState<span class="tsd-signature-symbol">: </span><a href="../modules/_microsoft_live_share.html#GetSynchronizationState" class="tsd-signature-type" data-tsd-kind="Type alias">GetSynchronizationState</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TState</span><span class="tsd-signature-symbol">&gt;</span>, updateState<span class="tsd-signature-symbol">: </span><a href="../modules/_microsoft_live_share.html#UpdateSynchronizationState" class="tsd-signature-type" data-tsd-kind="Type alias">UpdateSynchronizationState</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TState</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="_microsoft_live_share.EphemeralObjectSynchronizer.html" class="tsd-signature-type" data-tsd-kind="Class">EphemeralObjectSynchronizer</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TState</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/microsoft/live-share-sdk/blob/54e762d/packages/live-share/src/EphemeralObjectSynchronizer.ts#L89">packages/live-share/src/EphemeralObjectSynchronizer.ts:89</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Creates a new <code>EphemeralObjectSynchronizer</code> instance.</p>
</div><dl class="tsd-comment-tags"><dt>remarks</dt><dd><p>Consumers should subscribe to the synchronizers <code>&quot;received&quot;</code> event to process the remote
state updates being sent by other instances of the ephemeral object.</p>
</dd></dl></div><h4 class="tsd-type-parameters-title">Type parameters</h4><ul class="tsd-type-parameters"><li><h4>TState<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">object</span></h4></li></ul><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>id: <span class="tsd-signature-type">string</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>ID of the ephemeral object being synchronized. This should be the value of <code>this.id</code> in a class that derives from <code>DataObject</code>.</p>
</div></div></li><li><h5>containerRuntime: <a href="../interfaces/_microsoft_live_share.IContainerRuntimeSignaler.html" class="tsd-signature-type" data-tsd-kind="Interface">IContainerRuntimeSignaler</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The runtime for the objects container. This should be the value of <code>this.context.containerRuntime</code>.</p>
</div></div></li><li><h5>getState: <a href="../modules/_microsoft_live_share.html#GetSynchronizationState" class="tsd-signature-type" data-tsd-kind="Type alias">GetSynchronizationState</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TState</span><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>A function called to retrieve the objects current state. This will be called prior to a &quot;connect&quot; or &quot;update&quot; message being sent.</p>
</div></div></li><li><h5>updateState: <a href="../modules/_microsoft_live_share.html#UpdateSynchronizationState" class="tsd-signature-type" data-tsd-kind="Type alias">UpdateSynchronizationState</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TState</span><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>A function called to process a state update received from a remote instance. This will be called anytime a &quot;connect&quot; or &quot;update&quot; message is received.</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <a href="_microsoft_live_share.EphemeralObjectSynchronizer.html" class="tsd-signature-type" data-tsd-kind="Class">EphemeralObjectSynchronizer</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">TState</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section></section><section class="tsd-panel-group tsd-member-group "><h2>Properties</h2><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class tsd-is-static"><a id="updateInterval" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagStatic">Static</span> update<wbr/>Interval<a href="#updateInterval" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">update<wbr/>Interval<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">number</span><span class="tsd-signature-symbol"> = 2000</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/microsoft/live-share-sdk/blob/54e762d/packages/live-share/src/EphemeralObjectSynchronizer.ts#L115">packages/live-share/src/EphemeralObjectSynchronizer.ts:115</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Sets the rate at which state updates are broadcast in milliseconds.</p>
</div><dl class="tsd-comment-tags"><dt>remarks</dt><dd><p>Defaults to <code>2000</code> or once every 2 seconds.</p>
</dd></dl></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Methods</h2><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="dispose" class="tsd-anchor"></a><h3 class="tsd-anchor-link">dispose<a href="#dispose" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">dispose<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/microsoft/live-share-sdk/blob/54e762d/packages/live-share/src/EphemeralObjectSynchronizer.ts#L102">packages/live-share/src/EphemeralObjectSynchronizer.ts:102</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Disposes of the synchronizer.</p>
</div><dl class="tsd-comment-tags"><dt>remarks</dt><dd><p>All synchronization for the container will stop once the last instance has been disposed of.</p>
</dd></dl></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../modules.html">Modules</a></li><li class="current tsd-kind-module"><a href="../modules/_microsoft_live_share.html">@microsoft/live-<wbr/>share</a></li><li class=" tsd-kind-module"><a href="../modules/_microsoft_live_share_media.html">@microsoft/live-<wbr/>share-<wbr/>media</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-class tsd-parent-kind-module tsd-has-type-parameter"><a href="_microsoft_live_share.EphemeralObjectSynchronizer.html" class="tsd-kind-icon">Ephemeral<wbr/>Object<wbr/>Synchronizer</a><ul><li class="tsd-kind-constructor tsd-parent-kind-class tsd-has-type-parameter"><a href="_microsoft_live_share.EphemeralObjectSynchronizer.html#constructor" class="tsd-kind-icon">constructor</a></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><a href="_microsoft_live_share.EphemeralObjectSynchronizer.html#updateInterval" class="tsd-kind-icon">update<wbr/>Interval</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="_microsoft_live_share.EphemeralObjectSynchronizer.html#dispose" class="tsd-kind-icon">dispose</a></li></ul></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li><li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li><li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>